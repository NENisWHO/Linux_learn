
# 3_1 Linux网络基础

[toc]

---

## 1. 网络基础
### 1.1 网络的功能：
1. 资源共享
2. 信息传递
3. 增加可靠
4. 提高系统处理能力
   
### 1.2 网络的发展
1. 60年代：“分组交换”--> 提高数据传输效率
2. 70-80年代：“tcp/ip”--> 统一网络协议
3. 90年代：“web技术”--> 用户最容易享受的服务

### 1.3 广域网与局域网  
1. 广域网（WAN）
    * 范围：几十到几千千米
    * 作用：用于连接远距离计算机网络
    * 应用：Internet（英特网）  
    
2. 局域网（LAN）
    * 范围：一千米左右
    * 作用：用于连接较短距离计算机
    * 典型应用：企业网，校园网

### 1.4 网络中的重要设备
1. 交换机：连接设备入网，是设备能共享网络
2. 路由器：连接两个不同范围网络的设备

### 1.5 网络中的常用的网络拓扑结构
1. 星形拓扑：易于实现、易于扩展网络、易于排查故障、**可靠性低**
2. 网状拓扑：成本高、**可靠性高**

### 1.6 Tcp/Ip五层参考模型

|   网络层   |              协议               |  设备  |
| :--------: | :-----------------------------: | :----: |
|   应用层   | HTTP、FTP、TFTP、SMTP、NTP、DNS | 计算机 |
|   传输层   |            TCP、UDP             | 防火墙 |
|   网络层   |          ICMP、IP、ARP          | 路由器 |
| 数据链路层 |           VLAN、TRUNK           | 交换机 |
|   物理层   |                                 |  网卡  |

### 1.7 网络中传输数据的过程
>发送数据-->数据打包过程

```
应用层-->传输层-->网络层-->数据链路层-->物理层
pc发数据-->选择协议-->附加ip地址-->通过交换机转发-->网线网卡传输数据
```

>接收数据-->数据解封过程

```
此过程为“发送数据”的逆过程
```

### 1.8 网络设备控制方式
1. 直接控制    控制台窗口
2. 远程控制    ssh

### 1.9 网络的地址
1. IPv4地址（IP address）
    * 作用：唯一的用来标识一个节点（连网设备）的网络地址；
    * 地址组成：32个的二进制组成；由**网络位+主机位**组成。

2. IP地址的分类：类型判断只需要看IP地址的**第一个十进制位**

| ip类型 |  第一位十进制位  |  网段组成   |   子网掩码   |
| :----: | :-------------: | :---------: | :---------: |
|   A    |      1~127      | 网+主+主+主 |  255.0.0.0  |
|   B    |     128~191     | 网+网+主+主 | 255.255.0.0 |
|   C    |     192~223     | 网+网+网+主 |  255.0.0.0  |
|   D    | 224~139（组播） |             |             |
|   E    | 240~254（科研） |             |             |

* 特殊的ip地址
    * 127.0.0.1    本机回环地址
    * 0.0.0.0        严格说来，0.0.0.0已经不是一个真正意义上的IP地址了。它表示的是这样一个集合：所有不清楚的主机和目的网络。这里的“不清楚”是指在本机的路由表里没有特定条目指明如何到达。对本机来说，它就是一个“收容所”，所有不认识的“三无”人员，一律送进去。
    * 255.255.255.255    限制广播地址。对本机来说，这个地址指本网段内(同一广播域)的所有主机。如果翻译成人类的语言，应该是这样：“这个房间里的所有人都注意了！”这个地址不能被路由器转发。
* 私有地址：这些地址被大量用于企业内部网络中。
    * 10.X.X.X、172.16.X.X～172.31.X.X、192.168.X.X

3. 子网掩码：位计算机标识IP地址的网络位与主机位，利用二进制的1标识网络位，利用二进制的0标识主机位

4. mac地址（物理地址或者硬件地址），不需要自定义，设备出厂时会携带。
    * 标识：使用16进制
    * 作用：来标识设备的唯一性，不可修改，全球唯一

### 1.10 主机之间通信的三要素
1. IP地址
2. 子网掩码
3. IP路由网络设备     

### 1.11 网速 
```
100M位/s(秒) --- 12.5M字节/s
1000M位/s   ---  125M字节/s
```
---

## 2. 网络中的设备基础

### 2.1 交换机
0. 交换机的作用：**连接设备入网，使设备可以共享网络**
1. 交换机工作原理：**学习-->广播-->转发-->更新**
2. 交换机属于数据链路层的设备（二层交换机）

| 交换机工作流程 |                                            描述                                            |
| :-----------: | :----------------------------------------------------------------------------------------: |
|      学习      |                         学习数据帧中源mac地址，记录在一个mac地址表中                          |
|      广播      |                            对数据来源之外的所有接口发送寻找目标信息                            |
|      转发      |                                       一对一传递数据                                        |
|      更新      | 当连接交换机的设备超过300秒没有数据传递，以及设备从交换机断开，都会造成交换机清除对应的mac地址信息 |

4. **为解决广播泛滥，衍生出了vlan{Virtual LAN（vlan）虚拟局域网}和trunk技术**
    * 广播域：指接收同样广播信息的节点的集合，比如实际环境中的办公室、教室等
    * **为什么用vlan：交换机的所有接口默认属于同一个广播域；随着接入设备的增多，网络中的广播增多，降低了网络的效率（广播泛滥问题）；为划分广播域引入了VLAN。**
    * vlan的优点：**广播控制（划分广播域）、增加安全、提高宽带利用率、降低数据传递延迟**
    * trunk作用：**为数据帧打上vlan标识，使不同vlan数据可以用一条链路传递（单一链路可以承载多个vlan的数据）**

5. 三层交换机：同时具备交换机与路由器功能的强大网络设备，**位于第三层的网络层**

### 2.2 路由器
1. 路由器工作在网络层，让数据传输的更远。
    1. 网络层实现的功能：定义了IP地址
    2. 网络层重要的协议：
        1. **icmp（英特网控制报文协议），ping命令就是icmp协议可以检测网络的各种状态**
        2. **ip：唯一的网络地址标识**
2. **网关：一个网络设备通往另外一个网络设备，通常由路由器（具有路由功能的设备）承担**  

### 2.3 DNS服务器
* 域名解析系统，提供域名解析的机器。

## 3. 传输层的两个协议tcp、udp

1. 定义了端口号：**65536个（0~65535）**
2. 定义了tcp、udp两个协议
    1. tcp（传输控制协议）：可靠、效率低、面向连接
    
        |       三次握手        |     四次断开     |         标记          |
        | :------------------: | :--------------: | :-------------------: |
        |   用户syn-->服务器    | 用户fin-->服务器 | syn 打算与对方建立连接 |
        | 服务器ack，syn-->用户 | 服务器ack-->用户 |       ack 确认        |
        |   用户ack-->服务器    | 服务器fin-->用户 | fin 打算与对方断开连接 |
        |                      | 用户ack-->服务器 |                       |

    2. 使用tcp协议传输数据的常见服务
    
        | 端口 |  协议  |              说明              |
        | :--: | :---: | :---------------------------: |
        |  21  |  FTP  |    文件传输协议，用于上传下载    |
        |  22  |  SSH  |    用于远程登录，管理网络设备    |
        |  25  | SMTP  |  简单邮件传输协议，用于发送邮件  |
        |  53  |  DNS  |            域名服务            |
        |  80  | HTTP  |         超文本传输协议          |
        | 443  | HTTPS | 超文本传输协议，附带安全加密功能 |

    3. udp（用户数据报协议）：不可靠、效率高、无连接
    4. 使用udp传输数据的常见服务
        
        | 端口 | 协议 |      说明       |
        | :--: | :--: | :-------------: |
        |  69  | TFTP | 简单文件传输协议 |
        |  53  | DNS  |     域名服务     |
        | 123  | NTP  |   网络时间协议   |
        
---
