# 7_1 Linux 文件管理

[toc]

---

## 1. 基本权限与归属

* **访问权限**
    * 读取：允许查看内容 read                **r**
    * 写入：允许修改内容 write               **w**
    * 可执行：允许运行和切换 excute      **x**

* **对于文本文件**
    * r读取权限：允许查看内容cat、less、grep、head、tail
    * w写入权限：vim、>、>>
    * x执行权限：shell与python
    
*  **对于目录**
    * r读取权限：ls查看目录内容
    * w写入权限：能够**创建、删除、修改**目录的内容
    * x执行权限：能够**cd切换**到此目录
    
* **归属关系**
    * 所有者(属主)：拥有此文件/目录的用户-user  
    * 所属组(属组)：拥有此文件/目录的组-group 
    * 其他用户：除所有者、所属组以外的用户-other
    
---

## 2. 修改权限
*  **命令chmod**
    * 格式：chmod [ugoa] [+-=][rwx] 文件
    * 常用选项：
        * -R：递归修改权限
    * 利用数字方式表示
        * r--4，w--2，x--1

---                

## 3. 修改归属关系
* **命令chown**
    * chown 属主 文件
    * chown 属主:属组 文件
    * chown :属组 文件
    * 常规选项：
        * -R：递归修改归属关系
        
---

## 4. ACL策略管理

1. **文档归属的局限性：**
    * 任何人只属于三种角色：**属主、属组、其他人**
    * 针对特殊的人实现**更精细**的控制
    
2. **acl访问策略作用：**
    * **能够对个别用户、个别组设置独立的权限**
    * **大多数挂载的EXT3/4、XFS文件系统默认已支持**
    
3. **命令setfacl**
    * 格式：
        * setfacl [选项] u:用户名:权限  文件
        * setfacl [选项] g:组名:权限     文件
    * 常用命令选项
        * -m：修改ACL策略
        * -x：清除指定的ACL策略
        * -b：清除所有已设置的ACL策略
        * -R：递归设置ACL策略
    * getacl 文件：查看ACL策略

---    

## 5. 附加权限（特殊权限）
1. **粘滞位，Sticky Bit 权限**
    * 占用**其他人（Other）的 x 位**
    * 显示为 **t（other有x权限） 或 T（other无x权限）**，取决于其他人是否有 x 权限
    * 适用于**目录**，用来**限制用户滥用写入权**
    * **在设置了t权限的文件夹下，即使用户有写入权限，<font color=red>也不能删除或改名其他用户文档</font>**

2. **Set GID权限（SGID权限）**
    * 占用**属组（Group）的 x 位**
    * 显示为 **s（group有x） 或 S（group无x）**，取决于属组是否有 x 权限
    * 对**目录**有效
    * **在一个具有SGID权限的目录下，<font color=red>新建的文档会自动继承此目录的属组身份</font>**  

3. **SUID权限**
    * 占用**属主（User）的 x 位**
    * 显示为 **s（user有x） 或 S（user无x）**，取决于属主是否有 x 权限
    * 仅对**可执行的程序**有意义
    * **当其他用户执行带SUID标记的程序时，<font color=red>具有此程序属主的身份和相应权限</font>**

---

## 6. 文件/目录的默认权限
* 新建文件/目录的默认权限
    * 一般文件默认均不给 x 执行权限
    * 其他取决于 **umask(权限掩码)** 设置
    * 新建目录默认权限为755   
    * 新建文件默认权限为644
    
---